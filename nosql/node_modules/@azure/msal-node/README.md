---
ms.openlocfilehash: 05bea0332c8376e66d4aed62eab42a50c744536d
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/05/2022
ms.locfileid: "138050358"
---
# <a name="microsoft-authentication-library-for-node-msal-node"></a>Biblioteca de Autenticação da Microsoft para Node (msal-node)

[![versão do npm](https://img.shields.io/npm/v/@azure/msal-node.svg?style=flat)](https://www.npmjs.com/package/@azure/msal-node/)[![versão do npm](https://img.shields.io/npm/dm/@azure/msal-node.svg)](https://nodei.co/npm/@azure/msal-node/)[![Status de cobertura](https://coveralls.io/repos/github/AzureAD/microsoft-authentication-library-for-js/badge.svg?branch=dev)](https://coveralls.io/github/AzureAD/microsoft-authentication-library-for-js?branch=dev)

| <a href="https://docs.microsoft.com/azure/active-directory/develop/guidedsetups/active-directory-javascriptspa" target="_blank">Introdução</a> | <a href="https://aka.ms/aaddevv2" target="_blank">Documentação do AAD</a> | <a href="https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_node.html" target="_blank">Referência de biblioteca</a> |
| --- | --- | --- |

No momento, `msal-node` está em desenvolvimento. Acompanhe o progresso do projeto [aqui](https://github.com/AzureAD/microsoft-authentication-library-for-js/projects/4). Esta documentação também está em andamento e será alterada à medida que lançarmos patches do `alpha`. **Ainda não recomendamos usar esta opção em um ambiente de produção**.

1. [Sobre](#about)
2. [perguntas frequentes](#faq)
3. [Versões](#releases)
4. [Pré-requisitos](#prerequisites)
5. [Instalação](#installation)
6. [Usage](#usage)
7. [Amostras](#samples)
8. [Biblioteca de build](#build-and-test)
9. [Relatório de segurança](#security-reporting)
10. [Licença](#license)
11. [Código de conduta](#we-value-and-adhere-to-the-microsoft-open-source-code-of-conduct)

## <a name="about"></a>Sobre

A MSAL Node permite que aplicativos autentiquem usuários usando contas corporativas e de estudante do [AAD](https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-overview) (Azure AD), MSA (contas pessoais Microsoft) e provedores de identidade social como Facebook, Google, LinkedIn, contas Microsoft e outros por meio do serviço [Azure AD B2C](https://docs.microsoft.com/en-us/azure/active-directory-b2c/active-directory-b2c-overview#identity-providers). Ela também permite que o aplicativo obtenha tokens para acessar serviços do [Microsoft Cloud](https://www.microsoft.com/enterprise), como o [Microsoft Graph](https://graph.microsoft.io).


### <a name="oauth20-grant-types-supported"></a>Tipos de concessão OAuth2.0 com suporte:

A versão alfa atual dá suporte às seguintes maneiras de adquirir tokens:

#### <a name="public-client"></a>Cliente público:
- [Concessão de código de autorização](https://oauth.net/2/grant-types/authorization-code/) com [PKCE](https://oauth.net/2/pkce/)
- [Concessão de código de dispositivo](https://oauth.net/2/grant-types/device-code/)
- [Concessão do token de atualização](https://oauth.net/2/grant-types/refresh-token/)
- [Fluxo silencioso](https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-acquire-cache-tokens#acquiring-tokens-silently-from-the-cache)

#### <a name="confidential-client"></a>Cliente confidencial:
- [Concessão de código de autorização](https://oauth.net/2/grant-types/authorization-code/) com uma credencial de cliente
- [Concessão do token de atualização](https://oauth.net/2/grant-types/refresh-token/)
- [Fluxo silencioso](https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-acquire-cache-tokens#acquiring-tokens-silently-from-the-cache)
- [Concessão de credencial de cliente](https://oauth.net/2/grant-types/client-credentials/)
- [Fluxo em-nome-de](https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-on-behalf-of-flow)

**[Em breve]** Futuramente, planejamos adicionar suporte para:
- [Fluxo integrado de autenticação do Windows](https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-authentication-flows#integrated-windows-authentication)
- [Fluxo de nome de usuário e senha](https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-authentication-flows#usernamepassword)

Veja [aqui](https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-authentication-flows) mais detalhes sobre diferentes tipos de concessão compatíveis com as bibliotecas de autenticação da Microsoft em geral.

### <a name="scenarios-supported"></a>Cenários com suporte:

Os cenários compatíveis com essa biblioteca são:
- Aplicativo da área de trabalho que chama APIs Web
- Aplicativo Web que chama as APIs Web
- APIs Web que chamam APIs Web
- Aplicativos Daemon

Veja [aqui](https://docs.microsoft.com/en-us/azure/active-directory/develop/authentication-flows-app-scenarios) mais detalhes sobre cenários e os fluxos de autenticação mapeados para cada um deles.

## <a name="faq"></a>Perguntas frequentes

Consulte [aqui](https://github.com/AzureAD/microsoft-authentication-library-for-js/blob/dev/lib/msal-node/docs/faq.md).

## <a name="prerequisites"></a>Pré-requisitos

Antes de usar `@azure/msal-node`, você precisará registrar seu aplicativo no portal do Azure:

- [Registro do aplicativo](https://docs.microsoft.com/en-us/graph/auth-register-app-v2)

## <a name="installation"></a>Instalação

### <a name="via-npm"></a>Via NPM:
```javascript
npm install @azure/msal-node
```
##  <a name="usage"></a>Uso

### <a name="msal-basics"></a>Noções básicas sobre MSAL
- [Entender a diferença entre clientes públicos e confidenciais](https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-client-applications)
- [Inicializar um aplicativo cliente público](https://github.com/AzureAD/microsoft-authentication-library-for-js/blob/dev/lib/msal-node/docs/initialize-public-client-application.md)
- [Inicializar um aplicativo cliente confidencial](https://github.com/AzureAD/microsoft-authentication-library-for-js/blob/dev/lib/msal-node/docs/initialize-confidential-client-application.md)
- [Configuração](https://github.com/AzureAD/microsoft-authentication-library-for-js/blob/dev/lib/msal-node/docs/configuration.md)
- [Solicitação](https://github.com/AzureAD/microsoft-authentication-library-for-js/blob/dev/lib/msal-common/docs/request.md)
- [Resposta](https://github.com/AzureAD/microsoft-authentication-library-for-js/blob/dev/lib/msal-common/docs/response.md)

## <a name="samples"></a>Exemplos
Há vários [exemplos](https://github.com/AzureAD/microsoft-authentication-library-for-js/tree/dev/samples/msal-node-samples) incluídos no repositório que usam a MSAL Node para adquirir tokens. No momento, esses exemplos são usados para testes manuais e não são uma referência de práticas recomendadas, portanto, tenha bom senso e não copie esse código indiscriminadamente para nenhum aplicativo de produção.

- [auth-code](https://github.com/AzureAD/microsoft-authentication-library-for-js/tree/dev/samples/msal-node-samples/standalone-samples/auth-code): Aplicativo Express que usa o fluxo de código de autorização OAuth 2.0.
- [device-code](https://github.com/AzureAD/microsoft-authentication-library-for-js/tree/dev/samples/msal-node-samples/standalone-samples/device-code): Aplicativo de linha de comando que usa o fluxo de código de dispositivo OAuth 2.0.
- [refresh-token](https://github.com/AzureAD/microsoft-authentication-library-for-js/tree/dev/samples/msal-node-samples/standalone-samples/refresh-token): Aplicativo de linha de comando que usa o fluxo de atualização OAuth 2.0.
- [silent-flow](https://github.com/AzureAD/microsoft-authentication-library-for-js/tree/dev/samples/msal-node-samples/standalone-samples/silent-flow): Aplicativo Express que usa o fluxo de código de autorização OAuth2.0 para adquirir um token e armazená-lo no cache de tokens, bem como o fluxo silencioso para usar os tokens no cache de tokens.
- [client-credentials](https://github.com/AzureAD/microsoft-authentication-library-for-js/tree/dev/samples/msal-node-samples/standalone-samples/client-credentials): Aplicativo daemon que usa a concessão de credencial de credenciais OAuth 2.0 para adquirir um token.
- [on-behalf-of](https://github.com/AzureAD/microsoft-authentication-library-for-js/tree/dev/samples/msal-node-samples/standalone-samples/on-behalf-of): Aplicativo Web que usa o fluxo de código de autenticação OAuth 2.0 para adquirir um token para uma API Web. A API Web valida o token e chama o Microsoft Graph em nome do usuário que se autenticou no aplicativo Web.
- [msal-node-extensions](https://github.com/AzureAD/microsoft-authentication-library-for-js/tree/dev/extensions/samples/msal-node-extensions): Usa o fluxo de token de autorização para adquirir tokens e usa a biblioteca [msal-extensions](https://github.com/AzureAD/microsoft-authentication-library-for-js/tree/dev/extensions/) para gravar o cache de tokens in-memory da MSAL no disco.

## <a name="build-and-test"></a>Criar e testar

- O [lerna](https://github.com/lerna/lerna) não estiver instalado, execute `npm install -g lerna`
- Execute `lerna bootstrap` de qualquer lugar no `microsoft-authentication-library-for-js.git`.
- Navegue para `microsoft-authentication-library-for-js/lib/msal-common` e execute `npm run build`
- Navegue para `microsoft-authentication-library-for-js/lib/msal-node` e execute `npm run build`

```javascript
// to link msal-node and msal-common packages
lerna bootstrap

// Change to the msal-node package directory
cd lib/msal-common/

// To run build only for node package
npm run build

// Change to the msal-node package directory
cd lib/msal-node/

// To run build only for node package
npm run build
```

### <a name="local-development"></a>Desenvolvimento local
Abaixo está uma lista de comandos que você pode achar útil:

#### `npm run build:modules:watch`
Executa o projeto no modo de desenvolvimento/inspeção. Seu projeto será recompilado após as alterações. O TSDX tem um agente especial para sua conveniência. As mensagens de erro são reformatadas automaticamente para garantir a compatibilidade com a guia Problemas do VS Code. A biblioteca será recompilada se você fizer edições.

#### `npm run build`
Agrupa o pacote na pasta `dist`.
O pacote é otimizado e agrupado com o Rollup em vários formatos (CommonJS, UMD e Módulo ES).

#### `lerna bootstrap`
Se você estiver executando o projeto no modo de desenvolvimento/inspeção ou tiver feito alterações em `msal-common` e precisar que elas sejam refletidas em todo o projeto, execute `lerna bootstrap` para vincular todos os símbolos. Observe que `npm install` desvinculará todo o código, portanto, é recomendável executar `lerna bootstrap` após a instalação.

#### `npm run lint`
Executa eslint com o Prettier

#### <a name="npm-test-npm-run-testcoverage-npm-run-testwatch"></a>`npm test`, `npm run test:coverage`, `npm run test:watch`
Executa a inspeção de teste (Jest) em um modo interativo.
Por padrão, executa testes relacionados a arquivos alterados desde o último commit.
Gere cobertura de código adicionando o sinalizador --coverage. Não é necessária nenhuma configuração adicional. O Jest pode coletar informações de cobertura de código de projetos inteiros, incluindo arquivos não testados.

## <a name="security-reporting"></a>Relatório de segurança

Se você encontrar um problema de segurança com nossas bibliotecas ou serviços, relate-os para [secure@microsoft.com](mailto:secure@microsoft.com) com o máximo de detalhes possível. Seu envio pode ser qualificado para uma recompensa por meio do programa [Microsoft Bounty](http://aka.ms/bugbounty) . Não poste problemas de segurança nos Problemas do GitHub nem em outros sites públicos. Entraremos em contato com você logo após receber as informações. Recomendamos que você obtenha notificações sobre a ocorrência de incidentes de segurança visitando [esta página](https://technet.microsoft.com/security/dd252948) e assinando os alertas do Security Advisory.

## <a name="license"></a>Licença

Copyright (c) Microsoft Corporation.  Todos os direitos reservados. Licenciado sob a licença MIT.

## <a name="we-value-and-adhere-to-the-microsoft-open-source-code-of-conduct"></a>Valorizamos e seguimos o Código de Conduta de Software Livre da Microsoft

Este projeto adotou o [Código de Conduta de Software Livre da Microsoft](https://opensource.microsoft.com/codeofconduct/). Para obter mais informações, confira as [Perguntas frequentes sobre o código de conduta](https://opensource.microsoft.com/codeofconduct/faq/) ou entre em contato com [opencode@microsoft.com](mailto:opencode@microsoft.com) para enviar outras perguntas ou comentários.

