---
ms.openlocfilehash: f445a828ea5ae5cba850b910d938f10a783a7ed8
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/05/2022
ms.locfileid: "138050185"
---
# <a name="npmlog"></a>npmlog

O agente util que o npm usa.

Esse agente é muito básico.  Ele faz o registro em log do npm.  Ele dá suporte a níveis personalizados e saída com cores.

Por padrão, os logs são gravados no stderr.  Se você quiser enviar mensagens de log para saídas que não sejam fluxos, altere o membro `log.stream` ou apenas escute os eventos que ele emite e faça o que quiser com eles.

# <a name="installation"></a>Instalação

```console
npm install npmlog --save
```

# <a name="basic-usage"></a>Uso básico

```javascript
var log = require('npmlog')

// additional stuff ---------------------------+
// message ----------+                         |
// prefix ----+      |                         |
// level -+   |      |                         |
//        v   v      v                         v
    log.info('fyi', 'I have a kitty cat: %j', myKittyCat)
```

## <a name="loglevel"></a>log.level

* {String}

O nível em que os logs são exibidos.  Todos os logs nesse nível ou acima dele serão exibidos.  O nível especial `silent` impede qualquer tipo de exibição.

## <a name="logrecord"></a>log.record

* {Matriz}

Uma matriz de todas as mensagens de log que foram inseridas.

## <a name="logmaxrecordsize"></a>log.maxRecordSize

* {Número}

O número máximo de registros a serem mantidos.  Se log.record aumentar mais que 10% acima desse valor, ele será dividido para 90% desse valor.

O motivo da janela de 10% é para que ele não precise redimensionar uma matriz grande em cada entrada de log.

## <a name="logprefixstyle"></a>log.prefixStyle

* {Objeto}

Um objeto de estilo que especifica como os prefixos são estilizados.  (Veja abaixo)

## <a name="logheadingstyle"></a>log.headingStyle

* {Objeto}

Um objeto de estilo que especifica como os títulos são estilizados.  (Veja abaixo)

## <a name="logheading"></a>log.heading

* {Cadeia de caracteres} Padrão: ""

Se definido, um título que é impresso no início de cada linha.

## <a name="logstream"></a>log.stream

* {Fluxo} Padrão: `process.stderr`

O fluxo em que a saída é gravada.

## <a name="logenablecolor"></a>log.enableColor()

Forçar as cores a serem usadas em todas as mensagens, independentemente do fluxo de saída.

## <a name="logdisablecolor"></a>log.disableColor()

Desabilitar as cores em todas as mensagens.

## <a name="logenableprogress"></a>log.enableProgress()

Habilitar a exibição do controle giratório e da barra de progresso de atividade do log

## <a name="logdisableprogress"></a>log.disableProgress()

Desabilitar a exibição de uma barra de progresso

## <a name="logenableunicode"></a>log.enableUnicode()

Forçar o tema Unicode a ser usado para a barra de progresso.

## <a name="logdisableunicode"></a>log.disableUnicode()

Desabilitar o uso de Unicode na barra de progresso.

## <a name="logsetgaugetemplatetemplate"></a>log.setGaugeTemplate(template)

Definir um modelo para emitir a barra de progresso. Confira a [documentação do medidor] para obter detalhes.

[documentação do medidor]: https://npmjs.com/package/gauge

## <a name="logsetgaugethemesetthemes"></a>log.setGaugeThemeset(themes)

Selecionar um conjunto de temas para escolher os temas da barra de progresso. Confira a [documentação do medidor] para obter detalhes.

## <a name="logpause"></a>log.pause()

Parar de emitir mensagens para o fluxo, mas não as remover.

## <a name="logresume"></a>log.resume()

Emitir todas as mensagens em buffer que foram gravadas durante a pausa.

## <a name="logloglevel-prefix-message-"></a>log.log(level, prefix, message, ...)

* `level` {Cadeia de caracteres} O nível em que a mensagem será emitida
* `prefix` {Cadeia de caracteres} Um prefixo de cadeia de caracteres.  Defina como "" para ignorar.
* Argumentos de `message...` para `util.format`

Emitir uma mensagem de log em um nível especificado.

## <a name="loglevel"></a>log\[level](prefix, message, ...)

Por exemplo,

* log.silly(prefix, message, ...)
* log.verbose(prefix, message, ...)
* log.info(prefix, message, ...)
* log.http(prefix, message, ...)
* log.warn(prefix, message, ...)
* log.error(prefix, message, ...)

Como `log.log(level, prefix, message, ...)`.  Dessa forma, cada nível recebe uma abreviação, para que você possa executar `log.info(prefix, message)`.

## <a name="logaddlevellevel-n-style-disp"></a>log.addLevel(level, n, style, disp)

* `level` {Cadeia de caracteres} Indicador de nível
* `n` {Número} O nível numérico
* `style` {Objeto} Objeto com fg, bg, inverso etc.
* `disp` {Cadeia de caracteres} Substituição opcional de `level` na saída.

Configura um novo nível com uma função abreviada e assim por diante.

Observe que, se o número for `Infinity`, a definição do nível como esse número fará com que todas as mensagens de log sejam suprimidas.  Se o número for `-Infinity`, a única forma de exibição será habilitar todas as mensagens de log.

## <a name="lognewitemname-todo-weight"></a>log.newItem(name, todo, weight)

* `name` {Cadeia de caracteres} Opcional, nome do item de progresso.
* `todo` {Número} Opcional, quantidade total de trabalho a ser feito. Padrão 0.
* `weight` {Número} Opcional, o peso desse item em relação aos outros. Padrão 1.

Isso adiciona um novo rastreador de itens `are-we-there-yet` ao rastreador de progresso. O objeto retornado tem os métodos `log[level]`, mas, caso contrário, é um objeto `are-we-there-yet` `Tracker`.

## <a name="lognewstreamname-todo-weight"></a>log.newStream(name, todo, weight)

Adiciona um novo rastreador de fluxo `are-we-there-yet` ao rastreador de progresso. O objeto retornado tem os métodos `log[level]`, mas, caso contrário, é um objeto `are-we-there-yet` `TrackerStream`.

## <a name="lognewgroupname-weight"></a>log.newGroup(name, weight)

Adiciona um novo rastreador de itens `are-we-there-yet` ao rastreador de progresso. O objeto retornado tem os métodos `log[level]`, mas, caso contrário, é um objeto `are-we-there-yet` `TrackerGroup`.

# <a name="events"></a>Eventos

Todos os eventos são emitidos com o objeto de mensagem.

* `log` Emitido para todas as mensagens
* `log.<level>` Emitido para todas as mensagens com o nível `<level>`.
* `<prefix>` Mensagens com prefixos também emitem o respectivo prefixo como um evento.

# <a name="style-objects"></a>Objetos de estilo

Os objetos de estilo podem ter os seguintes campos:

* `fg` {Cadeia de caracteres} Cor do texto em primeiro plano
* `bg` {Cadeia de caracteres} Cor do texto em segundo plano
* `bold`, `inverse`, `underline` {Booliano} Definir a propriedade associada
* `bell` {Booliano} Fazer um barulho (isso é irritante, provavelmente.)

# <a name="message-objects"></a>Objetos de mensagem

Cada evento de log é emitido com um objeto de mensagem e a lista `log.record` contém todos que foram criados.  Eles têm os seguintes campos:

* `id` {Número}
* `level` {Cadeia de caracteres}
* `prefix` {Cadeia de caracteres}
* `message` {Cadeia de caracteres} Resultado de `util.format()`
* `messageRaw` {Matriz} Argumentos para `util.format()`

# <a name="blocking-ttys"></a>Bloquear TTYs

Usamos [`set-blocking`](https://npmjs.com/package/set-blocking) para definir o bloqueio de stderr e stdout se eles forem tty's e tiverem a chamada setBlocking.
Essa é uma solução alternativa para um problema nas versões iniciais do Node.js 6.x, que eliminou a capacidade de bloqueio de stderr e stdout no OSX. (Eles sempre fazem o bloqueio no Windows e nunca fazem no Linux). `npmlog` precisa que eles façam o bloqueio para permitir que a saída para stdout e stderr seja entrelaçada.
