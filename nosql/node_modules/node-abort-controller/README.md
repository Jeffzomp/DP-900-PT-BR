---
ms.openlocfilehash: ca2cf748b426d17058b55202a60ece01d9e05592
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/05/2022
ms.locfileid: "138050304"
---
# <a name="node-abort-controller"></a>node-abort-controller

Polyfill de AbortController para o Node.JS com base em EventEmitter

[![Status de build](https://dev.azure.com/stfaul/node-abort-controller/_apis/build/status/southpolesteve.node-abort-controller?branchName=master)](https://dev.azure.com/stfaul/node-abort-controller/_build/latest?definitionId=3&branchName=master)

## <a name="usage"></a>Uso

```js
import fetch from 'node-fetch'
import AbortController from 'node-abort-controller'

const controller = new AbortController()
const signal = controller.signal

await fetch('https:/www.google.com', { signal })

// Abort after 500ms. Effectively a timeout
setTimeout(() => controller.abort(), 500)
```

## <a name="why-would-i-use-this"></a>Por que usar essa opção?

Talvez você não precise. Em geral, há três ambientes em que o código JavaScript pode ser executado:

- Nó
- Navegadores modernos (fora o Internet Explorer)
- Navegadores herdados (principalmente o Internet Explorer)

Para APIs JS modernas, o ideal seria que cada ambiente obtivesse um polyfill:

- somente quando necessário
- específico da plataforma.

Na prática, isso é difícil. Ferramentas como Webpack e Browserify são ótimas para garantir que as coisas funcionem de imediato em todos os ambientes. Mas é muito fácil falhar nos dois pontos acima. É grande a probabilidade de que você acabe enviando polyfills que não sejam os ideais em plataformas que nem precisem deles. Então, o que um desenvolvedor deve fazer? No caso de `fetch` e `AbortController` eu fiz o trabalho para você. Este é um guia para esse trabalho.

Se você está desenvolvendo um...

#### <a name="application-running-in-modern-browsers"></a>Aplicativo em execução em navegadores modernos:

Parabéns! Você não precisa de uma biblioteca nem de um polyfill. Feche esta guia. Desinstale este pacote.

#### <a name="application-running-in-modern-browsers-and-node-such-as-a-server-side-rendered-js-app"></a>Aplicativo em execução em navegadores modernos e no Node (como um aplicativo JS renderizado no lado do servidor):

Use _este pacote_ e [node-fetch](https://www.npmjs.com/package/node-fetch). Esse é o mínimo de que você precisa.

#### <a name="application-supporting-legacy-browsers-and-not-node"></a>Aplicativo que dá suporte a navegadores herdados e não ao Node:

Use [abort-controller](https://www.npmjs.com/package/abort-controller) e [whatwg-fetch](https://www.npmjs.com/package/whatwg-fetch). São polyfills mais completos que funcionarão em todos os ambientes de navegador.

#### <a name="application-supporting-legacy-browsers-and-node"></a>Aplicativo que dá suporte a navegadores herdados e ao Node:

Use [abort-controller](https://www.npmjs.com/package/abort-controller) e [cross-fetch](https://www.npmjs.com/package/cross-fetch). O mesmo que acima, exceto que a busca cruzada executará polyfill corretamente no navegador e no Node.js

#### <a name="library-being-consumed-by-other-applications-and-using-fetch-internally"></a>Biblioteca sendo consumida por outros aplicativos e usando `fetch` internamente:

Use _este pacote_ e [node-fetch](https://www.npmjs.com/package/node-fetch). É a menor e mais simples combinação para os usuários finais. Os desenvolvedores de aplicativos direcionados ao Internet Exploer precisarão executar polyfill em `AbortController` e `fetch` por conta própria. Mas sua biblioteca não forçará polyfills desnecessários para desenvolvedores direcionados apenas a navegadores modernos.

## <a name="goals"></a>Metas

Com o guia acima em mente, essa biblioteca tem um conjunto muito específico de metas:

1. Fornecer um polyfill mínimo no Node.js
2. Não fornecer um polyfill em nenhum ambiente de navegador

Esse é o ideal para _autores de biblioteca_ que usam `fetch` e `AbortController` internamente e são direcionados a desenvolvedores para navegador _e_ Node.

## <a name="prior-art"></a>Arte prévia

Agradecemos @mysticatea pelo https://github.com/mysticatea/abort-controller. É um polyfill de `AbortController` fantástico e ideal para vários casos de uso.
