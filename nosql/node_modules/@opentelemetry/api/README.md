
---
<p align="center">
  <strong>
    <a href="https://open-telemetry.github.io/opentelemetry-js-api">Documentação da API<a/> &nbsp;&nbsp;&bull;&nbsp;&nbsp; <a href="https://github.com/open-telemetry/opentelemetry-js/discussions">Entrar em contato (Discussões do GitHub)<a/>
  </strong>
</p>

<p align="center">
  <a href="https://github.com/open-telemetry/opentelemetry-js-api/releases">
    <img alt="GitHub release (latest by date including pre-releases)" src="https://img.shields.io/github/v/release/open-telemetry/opentelemetry-js-api?include_prereleases&style=for-the-badge">
  </a>
  <a href="https://codecov.io/gh/open-telemetry/opentelemetry-js-api/branch/main/">
    <img alt="Codecov Status" src="https://img.shields.io/codecov/c/github/open-telemetry/opentelemetry-js-api?style=for-the-badge">
  </a>
  <a href="https://github.com/open-telemetry/opentelemetry-js-api/blob/main/LICENSE">
    <img alt="license" src="https://img.shields.io/badge/license-Apache_2.0-green.svg?style=for-the-badge">
  </a>
  <br/>
  <a href="https://github.com/open-telemetry/opentelemetry-js-api/actions/workflows/docs.yaml">
    <img alt="Build Status" src="https://github.com/open-telemetry/opentelemetry-js-api/actions/workflows/test.yaml/badge.svg?branch=main">
  </a>
  <a href="https://github.com/open-telemetry/opentelemetry-js-api/actions/workflows/test.yaml?query=branch%3Amain">
    <img alt="Build Status" src="https://github.com/open-telemetry/opentelemetry-js-api/actions/workflows/docs.yaml/badge.svg">
  </a>
</p>

---

# <a name="opentelemetry-api-for-javascript"></a>API OpenTelemetry para JavaScript

[![Versão publicada do NPM][npm-img]][npm-url]
[![dependências][dependencies-image]][dependencies-url]
[![devDependencies][devDependencies-image]][devDependencies-url]

Este pacote fornece tudo o que é necessário para interagir com a API OpenTelemetry, incluindo todas as interfaces TypeScript, as enumerações e as implementações sem operações. Ele deve ser usado no servidor e no navegador.

Os métodos neste pacote não executam nenhuma operação por padrão. Isso significa que eles podem ser chamados com segurança por uma biblioteca ou aplicativo de usuário final, com um SDK registrado ou não. Para gerar e exportar dados de telemetria, você também precisará de um SDK, como o [SDK do OpenTelemetry JS][opentelemetry-js].

## <a name="tracing-quick-start"></a>Guia de início rápido de rastreamento

### <a name="you-will-need"></a>Você precisará de

- Um aplicativo que quer instrumentar
- [SDK do OpenTelemetry JS][opentelemetry-js]
- Node.js >= 8.5.0 (14 ou superior é preferencial) ou um navegador compatível com o ECMAScript 5 ou superior

**Observação:** a compatibilidade com o ECMAScript 5 ou superior é somente para este pacote. Confira a documentação do SDK que você está usando para determinar a respectiva versão mínima do ECMAScript.

**Observação para autores de biblioteca:** Somente seus usuários finais precisarão de um SDK do OpenTelemetry. Se você quiser dar suporte ao OpenTelemetry na biblioteca, só precisará usar a API OpenTelemetry. Para obter mais informações, leia a [documentação de rastreamento][docs-tracing].

### <a name="install-dependencies"></a>Instalar dependências

```sh
npm install @opentelemetry/api @opentelemetry/tracing
```

### <a name="trace-your-application"></a>Rastrear o aplicativo

Para começar a rastrear o aplicativo, você precisará primeiro registrar um SDK. O SDK que você está usando pode fornecer um método de conveniência que chama os métodos de registro para você, mas se você quiser chamá-los diretamente, eles estão documentados aqui: [métodos de registro de SDK][docs-sdk-registration].

Depois de registrar um SDK, você poderá iniciar e encerrar intervalos. Veja abaixo um exemplo simples de registro básico de SDK e rastreamento de uma operação simples. O exemplo deve exportar intervalos para o console uma vez por segundo. Para obter mais informações, confira a [documentação de rastreamento][docs-tracing].

```javascript
const { trace }  = require("@opentelemetry/api");
const { BasicTracerProvider, ConsoleSpanExporter, SimpleSpanProcessor }  = require("@opentelemetry/tracing");

// Create and register an SDK
const provider = new BasicTracerProvider();
provider.addSpanProcessor(new SimpleSpanProcessor(new ConsoleSpanExporter()));
trace.setGlobalTracerProvider(provider);

// Acquire a tracer from the global tracer provider which will be used to trace the application
const name = 'my-application-name';
const version = '0.1.0';
const tracer = trace.getTracer(name, version);

// Trace your application by creating spans
async function operation() {
  const span = tracer.startSpan("do operation");

  // mock some work by sleeping 1 second
  await new Promise((resolve, reject) => {
    setTimeout(resolve, 1000);
  })

  span.end();
}

async function main() {
  while (true) {
    await operation();
  }
}

main();
```

## <a name="version-compatibility"></a>Compatibilidade entre versões

Como o instalador npm e o algoritmo de resolução do módulo do Node podem permitir que duas ou mais cópias de um determinado pacote existam dentro da mesma estrutura `node_modules`, a API OpenTelemetry aproveita uma variável no objeto `global` para armazenar a API global. Quando um método da API no pacote da API é chamado, ele verifica se essa API `global` existe e a chama com proxy somente quando ela é uma versão de API compatível. Isso significa que, se um pacote tiver uma dependência de uma versão da API OpenTelemetry que não seja compatível com a API usada pelo usuário final, o pacote receberá uma implementação sem operações da API.

## <a name="upgrade-guidelines"></a>Diretrizes de atualização

### <a name="0210-to-100"></a>de 0.21.0 para 1.0.0

Sem alterações de falha

### <a name="0200-to-0210"></a>de 0.20.0 para 0.21.0

- [Nº 78](https://github.com/open-telemetry/opentelemetry-js-api/issues/78) argumentos `api.context.bind` invertidos e `context` agora é um argumento necessário.
- [Nº 46](https://github.com/open-telemetry/opentelemetry-js-api/issues/46) Classes noop e singletons não são mais exportadas. Para criar um intervalo de noop, é recomendável usar `api.trace.wrapSpanContext` com `INVALID_SPAN_CONTEXT` em vez de usar o `NOOP_TRACER`.

### <a name="100-rc3-to-0200"></a>de 1.0.0-rc.3 para 0.20.0

- Remoção de `TimedEvent`, que não fazia parte da especificação
- `HttpBaggage` renomeado para `HttpBaggagePropagator`
- [Nº 45](https://github.com/open-telemetry/opentelemetry-js-api/pull/45) `Span#context` renomeado para `Span#spanContext`
- [Nº 47](https://github.com/open-telemetry/opentelemetry-js-api/pull/47)`getSpan`/`setSpan`/`getSpanContext`/`setSpanContext` movido para o namespace `trace`
- [Nº 55](https://github.com/open-telemetry/opentelemetry-js-api/pull/55) `getBaggage`/`setBaggage`/`createBaggage` movido para o namespace `propagation`

## <a name="useful-links"></a>Links úteis

- Para obter mais informações sobre o OpenTelemetry, visite: <https://opentelemetry.io/>
- Para obter mais informações sobre o OpenTelemetry JavaScript: <https://github.com/open-telemetry/opentelemetry-js>
- Para obter ajuda ou fazer comentários sobre este projeto, junte-se a nós em [discussões do GitHub][discussions-url]

## <a name="license"></a>Licença

Apache 2.0 – Confira [LICENÇA][license-url] para obter mais informações.

[opentelemetry-js]: https://github.com/open-telemetry/opentelemetry-js

[discussions-url]: https://github.com/open-telemetry/opentelemetry-js/discussions
[license-url]: https://github.com/open-telemetry/opentelemetry-js-api/blob/main/LICENSE
[license-image]: https://img.shields.io/badge/license-Apache_2.0-green.svg?style=flat
[dependencies-image]: https://status.david-dm.org/gh/open-telemetry/opentelemetry-js-api.svg
[dependencies-url]: https://david-dm.org/open-telemetry/opentelemetry-js-api
[devDependencies-image]: https://status.david-dm.org/gh/open-telemetry/opentelemetry-js-api.svg?type=dev
[devDependencies-url]: https://david-dm.org/open-telemetry/opentelemetry-js-api?type=dev
[npm-url]: https://www.npmjs.com/package/@opentelemetry/api
[npm-img]: https://badge.fury.io/js/%40opentelemetry%2Fapi.svg
[docs-tracing]: https://github.com/open-telemetry/opentelemetry-js-api/blob/main/docs/tracing.md
[docs-sdk-registration]: https://github.com/open-telemetry/opentelemetry-js-api/blob/main/docs/sdk-registration.md
