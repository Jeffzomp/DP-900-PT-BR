---
ms.openlocfilehash: aa7ddb2f2ce7709064cf5157f709fc1eff52cff7
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/05/2022
ms.locfileid: "138050350"
---
## <a name="follow-redirects"></a>Seguir Redirecionamentos

Substituição de menus suspensos dos módulos `http` e `https` do Node que seguem redirecionamentos automaticamente.

[![Versão do npm](https://img.shields.io/npm/v/follow-redirects.svg)](https://www.npmjs.com/package/follow-redirects)
[![Status de Build](https://github.com/follow-redirects/follow-redirects/workflows/CI/badge.svg)](https://github.com/follow-redirects/follow-redirects/actions)
[![Status de cobertura](https://coveralls.io/repos/follow-redirects/follow-redirects/badge.svg?branch=master)](https://coveralls.io/r/follow-redirects/follow-redirects?branch=master)
[![Downloads do npm](https://img.shields.io/npm/dm/follow-redirects.svg)](https://www.npmjs.com/package/follow-redirects)
[![Responsável no GitHub](https://img.shields.io/static/v1?label=Sponsor&message=%F0%9F%92%96&logo=GitHub)](https://github.com/sponsors/RubenVerborgh)

`follow-redirects` fornece os métodos [request](https://nodejs.org/api/http.html#http_http_request_options_callback) e [get](https://nodejs.org/api/http.html#http_http_get_options_callback) que se comportam de maneira idêntica aos encontrados nos módulos nativos [http](https://nodejs.org/api/http.html#http_http_request_options_callback) e [https](https://nodejs.org/api/https.html#https_https_request_options_callback), com a exceção de que eles seguirão perfeitamente os redirecionamentos.

```javascript
const { http, https } = require('follow-redirects');

http.get('http://bit.ly/900913', response => {
  response.on('data', chunk => {
    console.log(chunk);
  });
}).on('error', err => {
  console.error(err);
});
```

Você pode inspecionar a URL redirecionada final por meio da propriedade `responseUrl` na `response`.
Se não aconteceu nenhum redirecionamento, `responseUrl` é a URL de solicitação original.

```javascript
const request = https.request({
  host: 'bitly.com',
  path: '/UHfDGO',
}, response => {
  console.log(response.responseUrl);
  // 'http://duckduckgo.com/robots.txt'
});
request.end();
```

## <a name="options"></a>Opções
### <a name="global-options"></a>Opções globais
As opções globais são definidas diretamente no módulo `follow-redirects`:

```javascript
const followRedirects = require('follow-redirects');
followRedirects.maxRedirects = 10;
followRedirects.maxBodyLength = 20 * 1024 * 1024; // 20 MB
```

Há suporte para as seguintes opções de consulta:

- `maxRedirects` (padrão: `21`) – Define o número máximo de redirecionamentos permitidos. Se excedido, um erro será emitido.

- `maxBodyLength` (padrão: 10 MB) – Define o tamanho máximo do corpo da solicitação. Se excedido, um erro será emitido.

### <a name="per-request-options"></a>Opções por solicitação
As opções por solicitação são definidas passando um objeto `options`:

```javascript
const url = require('url');
const { http, https } = require('follow-redirects');

const options = url.parse('http://bit.ly/900913');
options.maxRedirects = 10;
options.beforeRedirect = (options, { headers }) => {
  // Use this to adjust the request options upon redirecting,
  // to inspect the latest response headers,
  // or to cancel the request by throwing an error
  if (options.hostname === "example.com") {
    options.auth = "user:password";
  }
};
http.request(options);
```

Além das [opções HTTP](https://nodejs.org/api/http.html#http_http_request_options_callback) e [HTTPS padrão](https://nodejs.org/api/https.html#https_https_request_options_callback), há suporte para as seguintes opções por solicitação:
- `followRedirects` (padrão: `true`) – Se os redirecionamentos devem ser seguidos.

- `maxRedirects` (padrão: `21`) – Define o número máximo de redirecionamentos permitidos. Se excedido, um erro será emitido.

- `maxBodyLength` (padrão: 10 MB) – Define o tamanho máximo do corpo da solicitação. Se excedido, um erro será emitido.

- `beforeRedirect` (padrão: `undefined`) – Opcionalmente, alterar a solicitação `options` nos redirecionamentos ou anular a solicitação gerando um erro.

- `agents` (padrão: `undefined`) – Define a opção `agent` por protocolo, já que HTTP e HTTPS usam agentes diferentes. Valor de exemplo: `{ http: new http.Agent(), https: new https.Agent() }`

- `trackRedirects` (padrão: `false`) – Se deseja armazenar os detalhes da resposta redirecionada na matriz `redirects` no objeto de resposta.


### <a name="advanced-usage"></a>Uso avançado
Por padrão, `follow-redirects` usará as implementações de [`http`](https://nodejs.org/api/http.html) e [`https`](https://nodejs.org/api/https.html) padrão do Node.js.
Para habilitar recursos como armazenamento em cache e/ou acompanhamento intermediário de solicitações, você pode encapsular `follow-redirects` nas implementações de protocolo personalizadas:

```javascript
const { http, https } = require('follow-redirects').wrap({
  http: require('your-custom-http'),
  https: require('your-custom-https'),
});
```

Esses protocolos personalizados só precisam de uma implementação do método `request`.

## <a name="browser-usage"></a>Uso do navegador

Devido à maneira como o navegador funciona, os equivalentes do navegador `http` e `https` executam redirecionamentos por padrão.

Ao exigir `follow-redirects` dessa forma:
```javascript
const http = require('follow-redirects/http');
const https = require('follow-redirects/https');
```
você pode dizer facilmente ao Webpack e aos amigos para substituir `follow-redirect` pelas versões internas:

```json
{
  "follow-redirects/http"  : "http",
  "follow-redirects/https" : "https"
}
```

## <a name="contributing"></a>Contribuição

Solicitações de pull são sempre bem-vindas. [Registre um problema](https://github.com/follow-redirects/follow-redirects/issues) detalhando sua proposta antes de investir seu tempo precioso. Recursos adicionais e correções de bugs devem ser acompanhados por testes. Você pode executar o conjunto de testes localmente com um comando simples `npm test`.

## <a name="debug-logging"></a>Registro em log de depuração

`follow-redirects` usa a [depuração](https://www.npmjs.com/package/debug) excelente para registro em log. Para ativar o registro em log, defina a variável de ambiente `DEBUG=follow-redirects` para a saída de depuração apenas deste módulo. Ao executar o conjunto de testes, às vezes, é vantajoso definir `DEBUG=*` para também ver a saída do servidor expresso.

## <a name="authors"></a>Autores

- [Ruben Verborgh](https://ruben.verborgh.org/)
- [Olivier Lalonde](mailto:olalonde@gmail.com)
- [James Talmage](mailto:james@talmage.io)

## <a name="license"></a>Licença

[Licença MIT](https://github.com/follow-redirects/follow-redirects/blob/master/LICENSE)
