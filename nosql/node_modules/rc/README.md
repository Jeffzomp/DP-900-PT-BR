---
ms.openlocfilehash: 4f70d9e1d8895757244ec8464f178ff3068a36bd
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/05/2022
ms.locfileid: "138050214"
---
# <a name="rc"></a>rc

O carregador de configuração não configurável para quem quer simplificar o trabalho.

## <a name="usage"></a>Uso

A única opção é passar ao rc o nome do aplicativo e a configuração padrão.

```javascript
var conf = require('rc')(appname, {
  //defaults go here.
  port: 2468,

  //defaults which are objects will be merged, not replaced
  views: {
    engine: 'jade'
  }
});
```

`rc` retornará as opções de configuração mescladas com os padrões especificados.
Se você passar um objeto padrão predefinido, ele será modificado:

```javascript
var conf = {};
require('rc')(appname, conf);
```

Se `rc` encontrar arquivos de configuração do aplicativo, o objeto de configuração retornado terá uma matriz `configs` contendo os respectivos caminhos:

```javascript
var appCfg = require('rc')(appname, conf);
appCfg.configs[0] // /etc/appnamerc
appCfg.configs[1] // /home/dominictarr/.config/appname
appCfg.config // same as appCfg.configs[appCfg.configs.length - 1]
```

## <a name="standards"></a>Padrões

Considerando o nome do aplicativo (`appname`), o rc vai procurar a configuração em todos os locais óbvios.

  * argumentos de linha de comando, analisados por minimist _(por exemplo `--foo baz`, também aninhado: `--foo.bar=baz`)_
  * variáveis de ambiente prefixadas com `${appname}_`
    * ou use "\_\_" para indicar propriedades aninhadas <br/> _(por exemplo, `appname_foo__bar__baz` => `foo.bar.baz`)_
  * se você passou uma opção `--config file`, desse arquivo
  * um local `.${appname}rc` ou o primeiro encontrado procurando em `./ ../ ../../ ../../../` etc.
  * `$HOME/.${appname}rc`
  * `$HOME/.${appname}/config`
  * `$HOME/.config/${appname}`
  * `$HOME/.config/${appname}/config`
  * `/etc/${appname}rc`
  * `/etc/${appname}/config`
  * o objeto padrão que você passou.

Todas as fontes de configuração encontradas serão niveladas em um objeto, de modo que as fontes **anteriores** nesta lista substituam as posteriores.


## <a name="configuration-file-formats"></a>Formatos de arquivo de configuração

Os arquivos de configuração (por exemplo `.appnamerc`) podem estar no formato [json](http://json.org/example) ou [ini](http://en.wikipedia.org/wiki/INI_file) . **Nenhuma** extensão de arquivo (`.json` ou `.ini`) deve ser usada. As configurações de exemplo abaixo são equivalentes:


#### <a name="formatted-as-ini"></a>Formatado como `ini`

```
; You can include comments in `ini` format if you want.

dependsOn=0.10.0


; `rc` has built-in support for ini sections, see?

[commands]
  www     = ./commands/www
  console = ./commands/repl


; You can even do nested sections

[generators.options]
  engine  = ejs

[generators.modules]
  new     = generate-new
  engine  = generate-backend

```

#### <a name="formatted-as-json"></a>Formatado como `json`

```javascript
{
  // You can even comment your JSON, if you want
  "dependsOn": "0.10.0",
  "commands": {
    "www": "./commands/www",
    "console": "./commands/repl"
  },
  "generators": {
    "options": {
      "engine": "ejs"
    },
    "modules": {
      "new": "generate-new",
      "backend": "generate-backend"
    }
  }
}
```

Os comentários são removidos da configuração JSON por meio de [strip-json-comments](https://github.com/sindresorhus/strip-json-comments).

> Como as variáveis ini e env não têm um padrão para tipos, o aplicativo precisa estar preparado para cadeias de caracteres.

Para garantir que as representações de cadeia de caracteres de boolianos e números sejam sempre convertidas nos tipos apropriados (útil quando você pretende fazer comparações `===` estritas), considere usar um módulo como [parse-strings-in-object](https://github.com/anselanza/parse-strings-in-object) para encapsular o objeto de configuração retornado do rc.


## <a name="simple-example-demonstrating-precedence"></a>Exemplo simples demonstrando precedência
Suponha que você tenha um aplicativo como este (observe os padrões embutidos em código passados ao rc):
```
const conf = require('rc')('myapp', {
    port: 12345,
    mode: 'test'
});

console.log(JSON.stringify(conf, null, 2));
```
Você também tem um arquivo `config.json`, com este conteúdo:
```
{
  "port": 9000,
  "foo": "from config json",
  "something": "else"
}
```
E um arquivo `.myapprc` na mesma pasta, com este conteúdo:
```
{
  "port": "3001",
  "foo": "bar"
}
```
Veja a saída esperada de vários comandos:

`node .`
```
{
  "port": "3001",
  "mode": "test",
  "foo": "bar",
  "_": [],
  "configs": [
    "/Users/stephen/repos/conftest/.myapprc"
  ],
  "config": "/Users/stephen/repos/conftest/.myapprc"
}
```
*O padrão `mode` do objeto embutido em código é retido, mas a porta é substituída pelo arquivo `.myapprc` (encontrado automaticamente com base na correspondência de nome de aplicativo) e `foo` é adicionado.*


`node . --foo baz`
```
{
  "port": "3001",
  "mode": "test",
  "foo": "baz",
  "_": [],
  "configs": [
    "/Users/stephen/repos/conftest/.myapprc"
  ],
  "config": "/Users/stephen/repos/conftest/.myapprc"
}
```
*O mesmo resultado que acima, mas `foo` é substituído porque os argumentos de linha de comando têm precedência sobre o arquivo `.myapprc`.*

`node . --foo barbar --config config.json`
```
{
  "port": 9000,
  "mode": "test",
  "foo": "barbar",
  "something": "else",
  "_": [],
  "config": "config.json",
  "configs": [
    "/Users/stephen/repos/conftest/.myapprc",
    "config.json"
  ]
}
```
*Agora, o `port` vem do arquivo `config.json` especificado (substituindo o valor de `.myapprc`), e o valor de `foo` é substituído pela linha de comando, apesar de também ter sido especificado no arquivo `config.json`.*
 


## <a name="advanced-usage"></a>Uso Avançado

#### <a name="pass-in-your-own-argv"></a>Passar seu próprio `argv`

Você pode passar seu próprio `argv` como o terceiro argumento para `rc`.  Faça isso quando quiser [usar seu próprio analisador de opções de linha de comando](https://github.com/dominictarr/rc/pull/12).

```javascript
require('rc')(appname, defaults, customArgvParser);
```

## <a name="pass-in-your-own-parser"></a>Passar seu próprio analisador

Se você tiver uma necessidade especial de usar um analisador não padrão, faça isso passando o analisador como o 4º argumento.
(deixe o 3º como nulo para obter o analisador de argumentos padrão)

```javascript
require('rc')(appname, defaults, null, parser);
```

Isso também pode ser usado para forçar um formato mais estrito, como somente JSON estrito e válido.

## <a name="note-on-performance"></a>Observação sobre o desempenho

`rc` executa `fs.statSync`, portanto, não o use em um caminho de código quente (por exemplo, um manipulador de solicitação) 


## <a name="license"></a>Licença

Licença multilicenciada sob a licença BSD de duas cláusulas, a licença MIT ou licença do Apache, versão 2.0
