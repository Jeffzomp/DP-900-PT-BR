---
ms.openlocfilehash: 0dad0f9e52c6ad7304b11c25c495ab90d49a7d98
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/05/2022
ms.locfileid: "138050401"
---
# <a name="debug"></a>depurar
[![Status de build](https://travis-ci.org/visionmedia/debug.svg?branch=master)](https://travis-ci.org/visionmedia/debug)  [![Status de cobertura](https://coveralls.io/repos/github/visionmedia/debug/badge.svg?branch=master)](https://coveralls.io/github/visionmedia/debug?branch=master)  [![Slack](https://visionmedia-community-slackin.now.sh/badge.svg)](https://visionmedia-community-slackin.now.sh/) [![OpenCollective](https://opencollective.com/debug/backers/badge.svg)](#backers)
[![OpenCollective](https://opencollective.com/debug/sponsors/badge.svg)](#sponsors)

<img width="647" src="https://user-images.githubusercontent.com/71256/29091486-fa38524c-7c37-11e7-895f-e7ec8e1039b6.png">

Um pequeno utilitário de depuração JavaScript modelado de acordo com a técnica de depuração do Node.js core. Funciona no Node.js e em navegadores da Web.

## <a name="installation"></a>Instalação

```bash
$ npm install debug
```

## <a name="usage"></a>Uso

`debug` expõe uma função. Basta passar a essa função o nome do módulo e ela retornará uma versão decorada de `console.error`que poderá receber instruções de depuração. Assim você poderá alternar a saída da depuração para diferentes partes do módulo, bem como para o módulo como um todo.

Exemplo [_app.js_](./examples/node/app.js):

```js
var debug = require('debug')('http')
  , http = require('http')
  , name = 'My App';

// fake app

debug('booting %o', name);

http.createServer(function(req, res){
  debug(req.method + ' ' + req.url);
  res.end('hello\n');
}).listen(3000, function(){
  debug('listening');
});

// fake worker of some kind

require('./worker');
```

Exemplo [_worker.js_](./examples/node/worker.js):

```js
var a = require('debug')('worker:a')
  , b = require('debug')('worker:b');

function work() {
  a('doing lots of uninteresting work');
  setTimeout(work, Math.random() * 1000);
}

work();

function workb() {
  b('doing some work');
  setTimeout(workb, Math.random() * 2000);
}

workb();
```

Depois, a variável de ambiente `DEBUG` é usada para habilitar essas opções com base em nomes delimitados por espaço ou vírgula.

Estes são alguns exemplos:

<img width="647" alt="screen shot 2017-08-08 at 12 53 04 pm" src="https://user-images.githubusercontent.com/71256/29091703-a6302cdc-7c38-11e7-8304-7c0b3bc600cd.png">
<img width="647" alt="screen shot 2017-08-08 at 12 53 38 pm" src="https://user-images.githubusercontent.com/71256/29091700-a62a6888-7c38-11e7-800b-db911291ca2b.png">
<img width="647" alt="screen shot 2017-08-08 at 12 53 25 pm" src="https://user-images.githubusercontent.com/71256/29091701-a62ea114-7c38-11e7-826a-2692bedca740.png">

#### <a name="windows-command-prompt-notes"></a>Observações do prompt de comando do Windows

##### <a name="cmd"></a>CMD

No Windows, a variável de ambiente é definida usando o comando `set`.

```cmd
set DEBUG=*,-not_this
```

Exemplo:

```cmd
set DEBUG=* & node app.js
```

##### <a name="powershell-vs-code-default"></a>PowerShell (padrão do VS Code)

O PowerShell usa uma sintaxe diferente para definir variáveis de ambiente.

```cmd
$env:DEBUG = "*,-not_this"
```

Exemplo:

```cmd
$env:DEBUG='app';node app.js
```

Depois, execute o programa a ser depurado como de costume.

Exemplo de script do npm:
```js
  "windowsDebug": "@powershell -Command $env:DEBUG='*';node app.js",
```

## <a name="namespace-colors"></a>Cores do namespace

Cada instância de depuração tem uma cor gerada para ela com base no nome do namespace.
Isso ajuda a analisar visualmente a saída da depuração para identificar a qual instância de depuração uma linha de depuração pertence.

#### <a name="nodejs"></a>Node.js

No Node.js, as cores são habilitadas quando stderr é um TTY. Você também _deve_ instalar o módulo [`supports-color`](https://npmjs.org/supports-color) junto com a depuração. Caso contrário, a depuração usará apenas um pequeno conjunto de cores básicas.

<img width="521" src="https://user-images.githubusercontent.com/71256/29092181-47f6a9e6-7c3a-11e7-9a14-1928d8a711cd.png">

#### <a name="web-browser"></a>Navegador da Web

As cores também são habilitadas em "Inspetores da Web" que entendem a opção de formatação `%c`. Eles são os inspetores da Web do WebKit, o Firefox ([desde a versão 31](https://hacks.mozilla.org/2014/05/editable-box-model-multiple-selection-sublime-text-keys-much-more-firefox-developer-tools-episode-31/)) e o plug-in Firebug para Firefox (qualquer versão).

<img width="524" src="https://user-images.githubusercontent.com/71256/29092033-b65f9f2e-7c39-11e7-8e32-f6f0d8e865c1.png">


## <a name="millisecond-diff"></a>Comparação de milissegundos

Durante o desenvolvimento ativo de um aplicativo, pode ser útil saber o tempo gasto entre uma chamada a `debug()` e a próxima. Se, por exemplo, você invocar `debug()` antes de solicitar um recurso e depois também, os "+NNNms" mostrarão quanto tempo foi gasto entre as chamadas.

<img width="647" src="https://user-images.githubusercontent.com/71256/29091486-fa38524c-7c37-11e7-895f-e7ec8e1039b6.png">

Quando stdout não é um TTY, `Date#toISOString()` é usado, o que aumenta sua utilidade para registrar em log as informações de depuração, conforme mostrado abaixo:

<img width="647" src="https://user-images.githubusercontent.com/71256/29091956-6bd78372-7c39-11e7-8c55-c948396d6edd.png">


## <a name="conventions"></a>Convenções

Se você estiver usando essa opção em uma ou mais bibliotecas, _use_ o nome da biblioteca para que os desenvolvedores possam alternar a depuração conforme o desejado sem adivinhar nomes. Se você tiver mais de um depurador, _prefixe-os_ com o nome da biblioteca e use ":" para separar os recursos. Por exemplo, "bodyParser" de Conexão seria "connect:bodyParser".  Se você acrescentar um "*" ao final do seu nome, ele sempre será habilitado independentemente da configuração da variável de ambiente DEBUG.  Depois, você poderá usá-lo para saída normal, bem como para saída de depuração.

## <a name="wildcards"></a>Curingas

O caractere `*` pode ser usado como curinga. Por exemplo, se sua biblioteca tiver depuradores chamados "connect:bodyParser", "connect:compress", "connect:session", em vez de listar os três com `DEBUG=connect:bodyParser,connect:compress,connect:session`, você poderá simplesmente executar `DEBUG=connect:*` ou para executar tudo usando este módulo, bastará usar `DEBUG=*`.

Você também pode excluir depuradores específicos prefixando-os com um caractere "-".
Por exemplo, `DEBUG=*,-connect:*` incluiria todos os depuradores, exceto aqueles que começam com "connect:".

## <a name="environment-variables"></a>Variáveis de ambiente

Em execuções com o Node.js, você pode definir algumas variáveis de ambiente que alteram o comportamento do log de depuração:

| Nome      | Finalidade                                         |
|-----------|-------------------------------------------------|
| `DEBUG`   | Habilita/desabilita namespaces de depuração específicos. |
| `DEBUG_HIDE_DATE` | Ocultar a data da saída de depuração (não TTY).  |
| `DEBUG_COLORS`| Se deseja ou não usar cores na saída de depuração. |
| `DEBUG_DEPTH` | Profundidade da inspeção de objeto.                    |
| `DEBUG_SHOW_HIDDEN` | Mostra propriedades ocultas em objetos inspecionados. |


__Observação:__ as variáveis de ambiente que começam com `DEBUG_` acabam sendo convertidas em um objeto Options que é usado com os formatadores `%o`/`%O`.
Confira a documentação do Node.js sobre [`util.inspect()`](https://nodejs.org/api/util.html#util_util_inspect_object_options)
para obter a lista completa.

## <a name="formatters"></a>Formatadores

A depuração usa a formatação [no estilo printf](https://wikipedia.org/wiki/Printf_format_string) .
Veja abaixo os formatadores com suporte oficial:

| Formatador | Representação |
|-----------|----------------|
| `%O`      | Reformatação automática de um objeto em várias linhas. |
| `%o`      | Reformatação automática de um objeto todo em uma só linha. |
| `%s`      | Cadeia de caracteres. |
| `%d`      | Número (inteiro e float). |
| `%j`      | JSON. Substituído pela cadeia de caracteres '[Circular]' se o argumento contiver referências circulares. |
| `%%`      | Sinal de porcentagem único ('%'). Não consome um argumento. |


### <a name="custom-formatters"></a>Formatadores personalizados

Você pode adicionar formatadores personalizados estendendo o objeto `debug.formatters`.
Por exemplo, se você quisar adicionar suporte para renderizar um Buffer como hexa com `%h`, execute algo como:

```js
const createDebug = require('debug')
createDebug.formatters.h = (v) => {
  return v.toString('hex')
}

// …elsewhere
const debug = createDebug('foo')
debug('this is hex: %h', new Buffer('hello world'))
//   foo this is hex: 68656c6c6f20776f726c6421 +0ms
```


## <a name="browser-support"></a>Suporte do navegador

Você poderá criar um script pronto para navegador usando o [Browserify](https://github.com/substack/node-browserify) ou apenas usar o [build](https://wzrd.in/standalone/debug@latest) do [Browserify como serviço](https://wzrd.in/) se não quiser compilá-lo por conta própria.

No momento, o estado de habilitação da depuração é persiste com `localStorage`.
Considere a situação mostrada abaixo em que você tem `worker:a` e `worker:b` e quer depurar os dois. Você pode habilitar isso usando `localStorage.debug`:

```js
localStorage.debug = 'worker:*'
```

E depois atualizar a página.

```js
a = debug('worker:a');
b = debug('worker:b');

setInterval(function(){
  a('doing some work');
}, 1000);

setInterval(function(){
  b('doing some work');
}, 1200);
```


## <a name="output-streams"></a>Fluxos de saída

  Por padrão `debug`, registra em log no stderr, mas isso pode ser configurado por namespace substituindo o método `log`:

Exemplo [_stdout.js_](./examples/node/stdout.js):

```js
var debug = require('debug');
var error = debug('app:error');

// by default stderr is used
error('goes to stderr!');

var log = debug('app:log');
// set this namespace to log via console.log
log.log = console.log.bind(console); // don't forget to bind to console!
log('goes to stdout');
error('still goes to stderr!');

// set all output to go via console.info
// overrides all per-namespace log settings
debug.log = console.info.bind(console);
error('now goes to stdout via console.info');
log('still goes to stdout, but via console.info now');
```

## <a name="extend"></a>Estender
Você pode simplesmente estender o depurador 
```js
const log = require('debug')('auth');

//creates new debug instance with extended namespace
const logSign = log.extend('sign');
const logLogin = log.extend('login');

log('hello'); // auth hello
logSign('hello'); //auth:sign hello
logLogin('hello'); //auth:login hello
```

## <a name="set-dynamically"></a>Definir dinamicamente

Você também pode habilitar a depuração dinamicamente chamando o método `enable()`:

```js
let debug = require('debug');

console.log(1, debug.enabled('test'));

debug.enable('test');
console.log(2, debug.enabled('test'));

debug.disable();
console.log(3, debug.enabled('test'));

```

imprimir:   
```
1 false
2 true
3 false
```

Uso:  
`enable(namespaces)`  
`namespaces` pode incluir modos separados por dois-pontos e curingas.
   
Observe que a chamada de `enable()` substitui completamente a variável DEBUG definida anteriormente: 

```
$ DEBUG=foo node -e 'var dbg = require("debug"); dbg.enable("bar"); console.log(dbg.enabled("foo"))'
=> false
```

`disable()`

Desabilitará todos os namespaces. As funções retornam os namespaces habilitados (e ignorados) no momento. Isso pode ser útil para desabilitar a depuração temporariamente sem saber o que foi habilitado inicialmente.

Por exemplo:

```js
let debug = require('debug');
debug.enable('foo:*,-foo:bar');
let namespaces = debug.disable();
debug.enable(namespaces);
```

Observação: não há garantia de que a cadeia de caracteres será idêntica à cadeia de caracteres da habilitação inicial, mas semanticamente elas serão idênticas.

## <a name="checking-whether-a-debug-target-is-enabled"></a>Verificar se um destino de depuração está habilitado

Depois de criar uma instância de depuração, você pode determinar se ela está habilitada ou não verificando a propriedade `enabled`:

```javascript
const debug = require('debug')('http');

if (debug.enabled) {
  // do stuff...
}
```

Você também pode alternar manualmente essa propriedade para forçar a instância de depuração a ser habilitada ou desabilitada.


## <a name="authors"></a>Autores

 - TJ Holowaychuk
 - Nathan Rajlich
 - Andrew Rhyne

## <a name="backers"></a>Apoiadores

Apoie-nos com uma doação mensal e ajude-nos a continuar nossas atividades. [[Torne-se um apoiador](https://opencollective.com/debug#backer)]

<a href="https://opencollective.com/debug/backer/0/website" target="_blank"><img src="https://opencollective.com/debug/backer/0/avatar.svg"></a>
<a href="https://opencollective.com/debug/backer/1/website" target="_blank"><img src="https://opencollective.com/debug/backer/1/avatar.svg"></a>
<a href="https://opencollective.com/debug/backer/2/website" target="_blank"><img src="https://opencollective.com/debug/backer/2/avatar.svg"></a>
<a href="https://opencollective.com/debug/backer/3/website" target="_blank"><img src="https://opencollective.com/debug/backer/3/avatar.svg"></a>
<a href="https://opencollective.com/debug/backer/4/website" target="_blank"><img src="https://opencollective.com/debug/backer/4/avatar.svg"></a>
<a href="https://opencollective.com/debug/backer/5/website" target="_blank"><img src="https://opencollective.com/debug/backer/5/avatar.svg"></a>
<a href="https://opencollective.com/debug/backer/6/website" target="_blank"><img src="https://opencollective.com/debug/backer/6/avatar.svg"></a>
<a href="https://opencollective.com/debug/backer/7/website" target="_blank"><img src="https://opencollective.com/debug/backer/7/avatar.svg"></a>
<a href="https://opencollective.com/debug/backer/8/website" target="_blank"><img src="https://opencollective.com/debug/backer/8/avatar.svg"></a>
<a href="https://opencollective.com/debug/backer/9/website" target="_blank"><img src="https://opencollective.com/debug/backer/9/avatar.svg"></a>
<a href="https://opencollective.com/debug/backer/10/website" target="_blank"><img src="https://opencollective.com/debug/backer/10/avatar.svg"></a>
<a href="https://opencollective.com/debug/backer/11/website" target="_blank"><img src="https://opencollective.com/debug/backer/11/avatar.svg"></a>
<a href="https://opencollective.com/debug/backer/12/website" target="_blank"><img src="https://opencollective.com/debug/backer/12/avatar.svg"></a>
<a href="https://opencollective.com/debug/backer/13/website" target="_blank"><img src="https://opencollective.com/debug/backer/13/avatar.svg"></a>
<a href="https://opencollective.com/debug/backer/14/website" target="_blank"><img src="https://opencollective.com/debug/backer/14/avatar.svg"></a>
<a href="https://opencollective.com/debug/backer/15/website" target="_blank"><img src="https://opencollective.com/debug/backer/15/avatar.svg"></a>
<a href="https://opencollective.com/debug/backer/16/website" target="_blank"><img src="https://opencollective.com/debug/backer/16/avatar.svg"></a>
<a href="https://opencollective.com/debug/backer/17/website" target="_blank"><img src="https://opencollective.com/debug/backer/17/avatar.svg"></a>
<a href="https://opencollective.com/debug/backer/18/website" target="_blank"><img src="https://opencollective.com/debug/backer/18/avatar.svg"></a>
<a href="https://opencollective.com/debug/backer/19/website" target="_blank"><img src="https://opencollective.com/debug/backer/19/avatar.svg"></a>
<a href="https://opencollective.com/debug/backer/20/website" target="_blank"><img src="https://opencollective.com/debug/backer/20/avatar.svg"></a>
<a href="https://opencollective.com/debug/backer/21/website" target="_blank"><img src="https://opencollective.com/debug/backer/21/avatar.svg"></a>
<a href="https://opencollective.com/debug/backer/22/website" target="_blank"><img src="https://opencollective.com/debug/backer/22/avatar.svg"></a>
<a href="https://opencollective.com/debug/backer/23/website" target="_blank"><img src="https://opencollective.com/debug/backer/23/avatar.svg"></a>
<a href="https://opencollective.com/debug/backer/24/website" target="_blank"><img src="https://opencollective.com/debug/backer/24/avatar.svg"></a>
<a href="https://opencollective.com/debug/backer/25/website" target="_blank"><img src="https://opencollective.com/debug/backer/25/avatar.svg"></a>
<a href="https://opencollective.com/debug/backer/26/website" target="_blank"><img src="https://opencollective.com/debug/backer/26/avatar.svg"></a>
<a href="https://opencollective.com/debug/backer/27/website" target="_blank"><img src="https://opencollective.com/debug/backer/27/avatar.svg"></a>
<a href="https://opencollective.com/debug/backer/28/website" target="_blank"><img src="https://opencollective.com/debug/backer/28/avatar.svg"></a>
<a href="https://opencollective.com/debug/backer/29/website" target="_blank"><img src="https://opencollective.com/debug/backer/29/avatar.svg"></a>


## <a name="sponsors"></a>Patrocinadores

Torne-se um patrocinador e coloque seu logotipo em nosso README no Github com um link para seu site. [[Torne-se um patrocinador](https://opencollective.com/debug#sponsor)]

<a href="https://opencollective.com/debug/sponsor/0/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/0/avatar.svg"></a>
<a href="https://opencollective.com/debug/sponsor/1/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/1/avatar.svg"></a>
<a href="https://opencollective.com/debug/sponsor/2/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/2/avatar.svg"></a>
<a href="https://opencollective.com/debug/sponsor/3/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/3/avatar.svg"></a>
<a href="https://opencollective.com/debug/sponsor/4/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/4/avatar.svg"></a>
<a href="https://opencollective.com/debug/sponsor/5/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/5/avatar.svg"></a>
<a href="https://opencollective.com/debug/sponsor/6/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/6/avatar.svg"></a>
<a href="https://opencollective.com/debug/sponsor/7/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/7/avatar.svg"></a>
<a href="https://opencollective.com/debug/sponsor/8/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/8/avatar.svg"></a>
<a href="https://opencollective.com/debug/sponsor/9/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/9/avatar.svg"></a>
<a href="https://opencollective.com/debug/sponsor/10/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/10/avatar.svg"></a>
<a href="https://opencollective.com/debug/sponsor/11/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/11/avatar.svg"></a>
<a href="https://opencollective.com/debug/sponsor/12/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/12/avatar.svg"></a>
<a href="https://opencollective.com/debug/sponsor/13/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/13/avatar.svg"></a>
<a href="https://opencollective.com/debug/sponsor/14/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/14/avatar.svg"></a>
<a href="https://opencollective.com/debug/sponsor/15/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/15/avatar.svg"></a>
<a href="https://opencollective.com/debug/sponsor/16/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/16/avatar.svg"></a>
<a href="https://opencollective.com/debug/sponsor/17/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/17/avatar.svg"></a>
<a href="https://opencollective.com/debug/sponsor/18/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/18/avatar.svg"></a>
<a href="https://opencollective.com/debug/sponsor/19/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/19/avatar.svg"></a>
<a href="https://opencollective.com/debug/sponsor/20/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/20/avatar.svg"></a>
<a href="https://opencollective.com/debug/sponsor/21/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/21/avatar.svg"></a>
<a href="https://opencollective.com/debug/sponsor/22/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/22/avatar.svg"></a>
<a href="https://opencollective.com/debug/sponsor/23/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/23/avatar.svg"></a>
<a href="https://opencollective.com/debug/sponsor/24/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/24/avatar.svg"></a>
<a href="https://opencollective.com/debug/sponsor/25/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/25/avatar.svg"></a>
<a href="https://opencollective.com/debug/sponsor/26/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/26/avatar.svg"></a>
<a href="https://opencollective.com/debug/sponsor/27/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/27/avatar.svg"></a>
<a href="https://opencollective.com/debug/sponsor/28/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/28/avatar.svg"></a>
<a href="https://opencollective.com/debug/sponsor/29/website" target="_blank"><img src="https://opencollective.com/debug/sponsor/29/avatar.svg"></a>

## <a name="license"></a>Licença

(A licença MIT)

Direitos autorais (c) 2014-2017 TJ Holowaychuk &lt;tj@vision-media.ca&gt;

A permissão é concedida por meio deste instrumento, gratuitamente, a qualquer pessoa que obtenha uma cópia deste software e dos arquivos de documentação associados (o 'Software') para lidar com o Software sem restrição, incluindo, entre outros, os direitos de uso, cópia, modificação, mesclagem, publicação, distribuição, sublicenciamento e/ou venda de cópias do Software e a permissão para que as pessoas que receberem o Software façam isso, de acordo com as seguintes condições:

O aviso de direitos autorais acima e esta notificação de permissão deverão ser incluídos em todas as cópias ou partes substanciais do Software.

O SOFTWARE É FORNECIDO "NO ESTADO EM QUE SE ENCONTRA" SEM NENHUM TIPO DE GARANTIA, EXPLÍCITA OU IMPLÍCITA, INCLUINDO, MAS SEM LIMITAÇÃO, AS GARANTIAS DE COMERCIALIZAÇÃO, ADEQUAÇÃO A UMA FINALIDADE ESPECÍFICA E DE NÃO VIOLAÇÃO.
EM NENHUMA CIRCUNSTÂNCIA OS AUTORES OU OS DETENTORES DE DIREITOS AUTORAIS SERÃO RESPONSABILIZADOS POR QUALQUER REIVINDICAÇÃO, DANOS OU OUTRA OBRIGAÇÃO, SEJA EM UMA AÇÃO DE CONTRATO, ATO ILÍCITO EXTRACONTRATUAL OU DECORRENTES DO, EM VIRTUDE DO OU EM CONEXÃO COM O SOFTWARE, USO OU OUTRAS NEGOCIAÇÕES NO SOFTWARE.
